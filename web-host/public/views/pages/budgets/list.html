<div class="page page-budgets" ng-controller="BudgetsListCtrl">

  <div class="pageheader">

    <h2>Manage Budgets</h2>

    <div class="page-bar">

      <ul class="page-breadcrumb">
        <li>
          <a ui-sref="app.overview"><i class="fa fa-home"></i> {{main.title}}</a>
        </li>
        <li>
          <a ui-sref="app.budgets.list">Manage Budgets</a>
        </li>
      </ul>

    </div>

  </div>

  <!-- row -->
  <div class="row">


    <div class="col-md-12">

      <!-- tile -->
      <section class="tile" fullscreen="isFullscreen01">

        <!-- tile header -->
        <div class="tile-header dvd dvd-btm">
          <h1 class="custom-font"><strong>Manage </strong>Budgets</h1>
          <ul class="controls">

            <li><button class="btn-nostyle" ui-sref="app.budgets.new"><i class="fa fa-plus mr-5"></i> Add Budget</button></li>

          </ul>
          
        </div>
        <!-- /tile header -->

        <!-- tile body -->
        <div class="tile-body">


          <!--<div class="row">
            <div class="col-md-6"></div>
            <div class="col-md-6">
              <input type="text" class="form-control underline-input w-md pull-right mb-20" placeholder="Search..." ng-model="searchText">
            </div>
          </div>-->

          <div class="table-responsive">
            <table ng-table="tableParams" class="table table-custom" template-pagination="custom/pager">
              <tr ng-repeat="budget in $data">
                <td data-title="'Name'" sortable="'category/name'">
                  {{budget.category.name}}
                </td>
                <td data-title="'Amount'">
                  {{budget.amount | currency}}
                </td>
                <td data-title="'Type'">
                  {{budget.type}}
                </td>
                <td data-title="'Date'">
                  {{budget.starts_on | date}}
                </td>
                <td data-title="'Repeat'">
                  <label ng-show="budget.repeat_frequency=='once'">
                    {{budget.repeat_frequency}}
                  </label>  
                  <label ng-show="budget.repeat_frequency =='daily'">
                    Every {{budget.repeat_interval}} days
                  </label>  
                  <label ng-show="budget.repeat_frequency =='weekly'">
                    Every {{budget.repeat_interval}} weeks
                  </label>  
                  <label ng-show="budget.repeat_frequency =='monthly'">
                    Every {{budget.repeat_interval}} months
                  </label>  
                  <label ng-show="budget.repeat_frequency =='yearly'">
                    Every {{budget.repeat_interval}} years
                  </label>  
                  

                </td>
                <td data-title="'Repeat End'">
                  <label ng-show="budget.repeat_end_option=='until'">
                    until {{budget.repeat_until | date}}
                  </label>                  
                  <label ng-show="budget.repeat_end_option=='occurrences'">
                    after {{budget.repeat_occurrences}} occurrences
                  </label>
                </td>
                <td data-title="'Scenario'">
                  {{budget.scenario.name}}
                </td>
                <td data-title="'Actions'" class="actions">
                  <button class="btn-nostyle edit"" ui-sref="app.budgets.edit({ id: budget.id })">Edit</button>
                  <button class="btn-nostyle delete" ng-click="delete(budget)">Delete</button>
                </td>

              </tr>
            </table>
            <script type="text/ng-template" id="custom/pager">
              <div class="ng-cloak ng-table-pager mt-20" ng-if="params.data.length">

                <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right">

                  <select ng-options="count for count in params.settings().counts" ng-model="params.$params.count" class="form-control"></select>

                </div>

                <ul class="pagination pagination-xs pagination-custom">
                  <li ng-class="{'disabled': !page.active && !page.current, 'active': page.current}" ng-repeat="page in pages" ng-switch="page.type">
                    <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">Previous</a>
                    <a ng-switch-when="first" ng-click="params.page(page.number)" href="">
                      <span ng-bind="page.number"></span>
                    </a>
                    <a ng-switch-when="page" ng-click="params.page(page.number)" href="">
                      <span ng-bind="page.number"></span>
                    </a>
                    <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a>
                    <a ng-switch-when="last" ng-click="params.page(page.number)" href="">
                      <span ng-bind="page.number"></span>
                    </a>
                    <a ng-switch-when="next" ng-click="params.page(page.number)" href="">Next</a>
                  </li>
                </ul>
              </div>
            </script>

          </div>


        </div>
        <!-- /tile body -->

      </section>
      <!-- /tile -->

    </div>

  </div>
  <!-- /row -->

</div>


